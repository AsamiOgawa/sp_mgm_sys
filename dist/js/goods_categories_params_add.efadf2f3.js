(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["goods_categories_params_add"],{"057f":function(t,e,a){var r=a("fc6a"),n=a("241c").f,s={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],o=function(t){try{return n(t)}catch(e){return i.slice()}};t.exports.f=function(t){return i&&"[object Window]"==s.call(t)?o(t):n(r(t))}},1276:function(t,e,a){"use strict";var r=a("d784"),n=a("44e7"),s=a("825a"),i=a("1d80"),o=a("4840"),c=a("8aa5"),l=a("50c4"),u=a("14c3"),d=a("9263"),f=a("d039"),m=[].push,p=Math.min,g=4294967295,b=!f((function(){return!RegExp(g,"y")}));r("split",2,(function(t,e,a){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,a){var r=String(i(this)),s=void 0===a?g:a>>>0;if(0===s)return[];if(void 0===t)return[r];if(!n(t))return e.call(r,t,s);var o,c,l,u=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,b=new RegExp(t.source,f+"g");while(o=d.call(b,r)){if(c=b.lastIndex,c>p&&(u.push(r.slice(p,o.index)),o.length>1&&o.index<r.length&&m.apply(u,o.slice(1)),l=o[0].length,p=c,u.length>=s))break;b.lastIndex===o.index&&b.lastIndex++}return p===r.length?!l&&b.test("")||u.push(""):u.push(r.slice(p)),u.length>s?u.slice(0,s):u}:"0".split(void 0,0).length?function(t,a){return void 0===t&&0===a?[]:e.call(this,t,a)}:e,[function(e,a){var n=i(this),s=void 0==e?void 0:e[t];return void 0!==s?s.call(e,n,a):r.call(String(n),e,a)},function(t,n){var i=a(r,t,this,n,r!==e);if(i.done)return i.value;var d=s(t),f=String(this),m=o(d,RegExp),h=d.unicode,v=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(b?"y":"g"),_=new m(b?d:"^(?:"+d.source+")",v),y=void 0===n?g:n>>>0;if(0===y)return[];if(0===f.length)return null===u(_,f)?[f]:[];var x=0,w=0,C=[];while(w<f.length){_.lastIndex=b?w:0;var k,P=u(_,b?f:f.slice(w));if(null===P||(k=p(l(_.lastIndex+(b?0:w)),f.length))===x)w=c(f,w,h);else{if(C.push(f.slice(x,w)),C.length===y)return C;for(var F=1;F<=P.length-1;F++)if(C.push(P[F]),C.length===y)return C;w=x=k}}return C.push(f.slice(x)),C}]}),!b)},"14c3":function(t,e,a){var r=a("c6b6"),n=a("9263");t.exports=function(t,e){var a=t.exec;if("function"===typeof a){var s=a.call(t,e);if("object"!==typeof s)throw TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==r(t))throw TypeError("RegExp#exec called on incompatible receiver");return n.call(t,e)}},"159b":function(t,e,a){var r=a("da84"),n=a("fdbc"),s=a("17c2"),i=a("9112");for(var o in n){var c=r[o],l=c&&c.prototype;if(l&&l.forEach!==s)try{i(l,"forEach",s)}catch(u){l.forEach=s}}},"17c2":function(t,e,a){"use strict";var r=a("b727").forEach,n=a("a640"),s=a("ae40"),i=n("forEach"),o=s("forEach");t.exports=i&&o?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},2374:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("商品管理")]),a("el-breadcrumb-item",[t._v("商品列表")])],1),a("el-card",{staticClass:"box-card"},[a("el-row",[a("el-col",{staticClass:"mg-r",attrs:{span:8}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容",clearable:""},on:{clear:t.clearSearchText},model:{value:t.queryParams.query,callback:function(e){t.$set(t.queryParams,"query",e)},expression:"queryParams.query"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.searchGoods},slot:"append"})],1)],1),a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"primary"},on:{click:t.goAddGoods}},[t._v("添加商品")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.goodsListData,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"#"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s((t.queryParams.pagenum-1)*t.queryParams.pagesize+e.$index+1))]}}])}),a("el-table-column",{attrs:{prop:"goods_name",label:"商品名称"}}),a("el-table-column",{attrs:{prop:"goods_price",label:"商品价格(元)",width:"95px"}}),a("el-table-column",{attrs:{prop:"goods_weight",label:"商品重量",width:"70px"}}),a("el-table-column",{attrs:{prop:"add_time",label:"创建时间",width:"140px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("dateFormat")(e.row.add_time)))]}}])}),a("el-table-column",{attrs:{label:"操作",width:"130px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"el-icon-edit",attrs:{type:"primary",size:"mini"}}),a("el-button",{staticClass:"el-icon-delete",attrs:{type:"danger",size:"mini"},on:{click:function(a){return t.delGoods(e.row)}}})]}}])})],1),a("el-pagination",{attrs:{"current-page":t.queryParams.pagenum,"page-sizes":[5,10,20],"page-size":t.queryParams.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},n=[],s=(a("96cf"),a("1da1")),i={data:function(){return{searchText:"",goodsListData:[],queryParams:{query:"",pagenum:1,pagesize:5},total:0}},created:function(){this.getGoodsList()},methods:{getGoodsList:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/goods",{params:t.queryParams});case 2:if(a=e.sent,r=a.data,200===r.meta.status){e.next=6;break}return e.abrupt("return",t.$message.error("获取商品列表失败！"));case 6:t.goodsListData=r.data.goods,t.total=r.data.total;case 8:case"end":return e.stop()}}),e)})))()},searchGoods:function(){this.queryParams.pagenum=1,this.getGoodsList()},clearSearchText:function(){this.queryParams.pagenum=1,this.getGoodsList()},goAddGoods:function(){this.$router.push("/add")},delGoods:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$confirm("此操作将永久删除该商品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(t){return t}));case 2:if(r=a.sent,"cancel"!==r){a.next=5;break}return a.abrupt("return");case 5:return a.next=7,e.$http.delete("/goods/".concat(t.goods_id));case 7:if(n=a.sent,s=n.data,200===s.meta.status){a.next=13;break}return a.abrupt("return",e.$message.error("删除商品失败！"));case 13:e.$message.success("删除商品成功！"),e.getGoodsList();case 15:case"end":return a.stop()}}),a)})))()},handleSizeChange:function(t){this.queryParams.pagesize=t,this.getGoodsList()},handleCurrentChange:function(t){this.queryParams.pagenum=t,this.getGoodsList()}}},o=i,c=(a("877c"),a("2877")),l=Object(c["a"])(o,r,n,!1,null,"d51c9f70",null);e["default"]=l.exports},"3b0d":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("商品管理")]),a("el-breadcrumb-item",[t._v("分类参数")])],1),a("el-card",{staticClass:"box-card"},[a("el-alert",{staticClass:"mg-b",attrs:{title:"注意：只允许为第三级分类设置相关参数！",type:"warning","show-icon":"",closable:!1}}),a("div",{staticClass:"mg-b"},[t._v(" 选择商品分类： "),a("el-cascader",{attrs:{options:t.categoriesList,props:t.receiveProps,clearable:""},on:{change:t.handleChange},model:{value:t.selectedCate,callback:function(e){t.selectedCate=e},expression:"selectedCate"}})],1),a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"动态参数",name:"many"}},[a("el-button",{staticClass:"mg-b",attrs:{type:"primary",size:"small",disabled:t.isBtnDisabled},on:{click:t.showAddVisible}},[t._v("添加参数")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.cateParams,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.attr_vals,(function(r,n){return a("el-tag",{key:n,attrs:{closable:""},on:{close:function(a){return t.handleClose(e.row)}}},[t._v(t._s(r))])})),e.row.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(a){return t.handleInputConfirm(e.row)}},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.handleInputConfirm(e.row)}},model:{value:e.row.inputValue,callback:function(a){t.$set(e.row,"inputValue",a)},expression:"slotsProps.row.inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(a){return t.showInput(e.row)}}},[t._v("+ New Tag")])]}}])}),a("el-table-column",{attrs:{type:"index",label:"#"}}),a("el-table-column",{attrs:{prop:"attr_name",label:"参数名称"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(a){return t.showEditPramsDialog(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return t.delParams(e.row)}}},[t._v("删除")])]}}])})],1)],1),a("el-tab-pane",{attrs:{label:"静态属性",name:"only"}},[a("el-button",{staticClass:"mg-b",attrs:{type:"primary",size:"small",disabled:t.isBtnDisabled},on:{click:t.showAddVisible}},[t._v("添加属性")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.cateParams,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.attr_vals,(function(r,n){return a("el-tag",{key:n,attrs:{closable:""},on:{close:function(a){return t.handleClose(e.row)}}},[t._v(t._s(r))])})),e.row.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(a){return t.handleInputConfirm(e.row)}},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.handleInputConfirm(e.row)}},model:{value:e.row.inputValue,callback:function(a){t.$set(e.row,"inputValue",a)},expression:"slotsProps.row.inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(a){return t.showInput(e.row)}}},[t._v("+ New Tag")])]}}])}),a("el-table-column",{attrs:{type:"index",label:"#"}}),a("el-table-column",{attrs:{prop:"attr_name",label:"属性名称"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(a){return t.showEditPramsDialog(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return t.delParams(e.row)}}},[t._v("删除")])]}}])})],1)],1)],1)],1),a("div",[a("el-dialog",{attrs:{title:"添加"+t.addParamsText,visible:t.addVisible,width:"50%"},on:{"update:visible":function(e){t.addVisible=e},close:t.closeAddDialog}},[a("el-form",{ref:"addFormRef",attrs:{model:t.addForm,rules:t.addFormRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:t.addParamsText,prop:"attr_name"}},[a("el-input",{model:{value:t.addForm.attr_name,callback:function(e){t.$set(t.addForm,"attr_name",e)},expression:"addForm.attr_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addAttr}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑"+t.addParamsText,visible:t.editParamsVisible,width:"50%"},on:{"update:visible":function(e){t.editParamsVisible=e},close:t.resetEditParamsForm}},[a("el-form",{ref:"editParamsFormRef",attrs:{model:t.editParamsForm,rules:t.editParamsFormRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"动态参数",prop:"attr_name"}},[a("el-input",{model:{value:t.editParamsForm.attr_name,callback:function(e){t.$set(t.editParamsForm,"attr_name",e)},expression:"editParamsForm.attr_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editParamsVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.editParams()}}},[t._v("确 定")])],1)],1)],1)],1)},n=[],s=(a("99af"),a("4160"),a("c975"),a("a15b"),a("a434"),a("ac1f"),a("1276"),a("498a"),a("159b"),a("96cf"),a("1da1")),i=a("4328"),o=a.n(i),c={data:function(){return{categoriesList:[],receiveProps:{expandTrigger:"hover",value:"cat_id",label:"cat_name",children:"children"},selectedCate:[],activeName:"many",cateParams:[],addVisible:!1,addForm:{attr_name:""},addFormRules:{attr_name:[{required:!0,message:"此处不能为空",trriger:"blur"},{max:20,message:"最大20个字符",trriger:"blur"}]},editParamsVisible:!1,editParamsForm:{},editParamsFormRules:{attr_name:[{required:!0,message:"动态参数名不能为空",trriger:"blur"},{max:20,message:"动态参数名最大20个字符",trriger:"blur"}]}}},created:function(){this.getCategoriesList()},methods:{getCategoriesList:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/categories");case 2:if(a=e.sent,r=a.data,200===r.meta.status){e.next=8;break}return e.abrupt("return",t.$message.error("获取商品分类数据列表失败！"));case 8:t.categoriesList=r.data;case 9:case"end":return e.stop()}}),e)})))()},getCateParams:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/categories/".concat(t.categoriesID,"/attributes"),{params:{sel:t.activeName}});case 2:if(a=e.sent,r=a.data,200===r.meta.status){e.next=8;break}return e.abrupt("return",t.$message.error("获取商品分类参数失败！"));case 8:r.data.forEach((function(t){t.attr_vals&&(t.attr_vals=t.attr_vals.split(" ")),t.inputVisible=!1,t.inputValue=""})),t.cateParams=r.data;case 10:case"end":return e.stop()}}),e)})))()},handleChange:function(){0!==this.selectedCate.length?this.getCateParams():this.cateParams=[]},handleClick:function(){this.isBtnDisabled||this.getCateParams()},showEditPramsDialog:function(t){this.editParamsForm=t,this.editParamsVisible=!0},resetEditParamsForm:function(){this.$refs.editParamsFormRef.resetFields(),this.getCateParams()},editParams:function(){var t=this;this.$refs.editParamsFormRef.validate(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(a){var r,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a){e.next=4;break}return e.abrupt("return");case 4:return r=t.editParamsForm,e.next=7,t.$http.put("/categories/".concat(r.cat_id,"/attributes/").concat(r.attr_id),o.a.stringify({attr_name:r.attr_name,attr_sel:r.attr_sel,attr_vals:r.attr_vals}),{header:{"Content-Type":"application/x-www-form-urlencoded"}});case 7:if(n=e.sent,s=n.data,200===s.meta.status){e.next=13;break}return e.abrupt("return",t.$message.error("修改动态参数失败！"));case 13:t.$message.success("修改动态参数成功！"),t.getCateParams(),t.editParamsVisible=!1;case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},showAddVisible:function(){this.addVisible=!0},closeAddDialog:function(){this.$refs.addFormRef.resetFields()},addAttr:function(){var t=this;this.$refs.addFormRef.validate(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(a){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,t.$http.post("/categories/".concat(t.categoriesID,"/attributes"),o.a.stringify({attr_name:t.addForm.attr_name,attr_sel:t.activeName}),{header:{"Content-Type":"application/x-www-form-urlencoded"}});case 6:if(r=e.sent,n=r.data,201===n.meta.status){e.next=12;break}return e.abrupt("return",t.$message.error("添加".concat(t.addParamsText,"失败")));case 12:t.$message.success("添加".concat(t.addParamsText,"成功")),t.addVisible=!1,t.getCateParams();case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},delParams:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$confirm("此操作将永久删除该".concat(e.addParamsText,", 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(t){return t}));case 2:if(r=a.sent,"cancel"!==r){a.next=5;break}return a.abrupt("return");case 5:return a.next=7,e.$http.delete("/categories/".concat(t.cat_id,"/attributes/").concat(t.attr_id));case 7:if(n=a.sent,s=n.data,200===s.meta.status){a.next=13;break}return a.abrupt("return",e.$message.error("删除".concat(e.addParamsText,"失败")));case 13:e.$message.success("删除".concat(e.addParamsText,"成功")),e.getCateParams();case 15:case"end":return a.stop()}}),a)})))()},showInput:function(t){var e=this;t.inputVisible=!0,this.$nextTick((function(){e.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.inputVisible=!1,0!==t.inputValue.trim().length){a.next=4;break}return t.inputValue="",a.abrupt("return");case 4:return"string"===typeof t.attr_vals&&(t.attr_vals=[]),t.attr_vals.push(t.inputValue.trim()),t.inputValue="",a.next=9,e.$http.put("/categories/".concat(t.cat_id,"/attributes/").concat(t.attr_id),o.a.stringify({attr_name:t.attr_name,attr_sel:t.attr_sel,attr_vals:t.attr_vals.join(" ")}),{header:{"Content-Type":"application/x-www-form-urlencoded"}});case 9:if(r=a.sent,n=r.data,200===n.meta.status){a.next=15;break}return a.abrupt("return",e.$message.error("添加标记失败！"));case 15:e.$message.success("添加标记成功！");case 16:case"end":return a.stop()}}),a)})))()},handleClose:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.attr_vals.splice(t.attr_vals.indexOf(t),1),a.next=3,e.$http.put("/categories/".concat(t.cat_id,"/attributes/").concat(t.attr_id),o.a.stringify({attr_name:t.attr_name,attr_sel:t.attr_sel,attr_vals:t.attr_vals.join(" ")}),{header:{"Content-Type":"application/x-www-form-urlencoded"}});case 3:if(r=a.sent,n=r.data,200===n.meta.status){a.next=9;break}return a.abrupt("return",e.$message.error("删除标记失败"));case 9:e.$message.success("删除标记成功");case 10:case"end":return a.stop()}}),a)})))()}},computed:{isBtnDisabled:function(){return 0===this.selectedCate.length},categoriesID:function(){return 0===this.selectedCate.length?null:this.selectedCate[this.selectedCate.length-1]},addParamsText:function(){return"many"===this.activeName?"动态参数":"静态属性"}}},l=c,u=(a("d3e9"),a("2877")),d=Object(u["a"])(l,r,n,!1,null,"335ddc55",null);e["default"]=d.exports},"3ca3":function(t,e,a){"use strict";var r=a("6547").charAt,n=a("69f3"),s=a("7dd0"),i="String Iterator",o=n.set,c=n.getterFor(i);s(String,"String",(function(t){o(this,{type:i,string:String(t),index:0})}),(function(){var t,e=c(this),a=e.string,n=e.index;return n>=a.length?{value:void 0,done:!0}:(t=r(a,n),e.index+=t.length,{value:t,done:!1})}))},4160:function(t,e,a){"use strict";var r=a("23e7"),n=a("17c2");r({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},"44e7":function(t,e,a){var r=a("861d"),n=a("c6b6"),s=a("b622"),i=s("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==n(t))}},"498a":function(t,e,a){"use strict";var r=a("23e7"),n=a("58a8").trim,s=a("c8d2");r({target:"String",proto:!0,forced:s("trim")},{trim:function(){return n(this)}})},"4f88":function(t,e,a){"use strict";var r=a("892b"),n=a.n(r);n.a},"4f9b":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("商品管理")]),a("el-breadcrumb-item",[t._v("添加商品")])],1),a("el-card",[a("el-alert",{attrs:{title:"添加商品信息",type:"info","show-icon":"",center:"",closable:!1}}),a("el-steps",{staticClass:"fs-12",attrs:{space:200,active:t.activeIndex-0,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:"基本信息"}}),a("el-step",{attrs:{title:"商品参数"}}),a("el-step",{attrs:{title:"商品属性"}}),a("el-step",{attrs:{title:"商品图片"}}),a("el-step",{attrs:{title:"商品内容"}}),a("el-step",{attrs:{title:"完成"}})],1),a("el-form",{ref:"addGoodsFormRef",attrs:{model:t.addGoodsForm,rules:t.addGoodsFormRules,"label-width":"80px","label-position":"top"}},[a("el-tabs",{attrs:{"tab-position":t.tabPosition,"before-leave":t.beforeLeaveEvent},on:{"tab-click":t.handleClick},model:{value:t.activeIndex,callback:function(e){t.activeIndex=e},expression:"activeIndex"}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"0"}},[a("el-form-item",{attrs:{label:"商品名称",prop:"goods_name"}},[a("el-input",{model:{value:t.addGoodsForm.goods_name,callback:function(e){t.$set(t.addGoodsForm,"goods_name",e)},expression:"addGoodsForm.goods_name"}})],1),a("el-form-item",{attrs:{label:"商品价格",prop:"goods_price",required:""}},[a("el-input-number",{staticClass:"num-left",attrs:{"controls-position":"right",min:1},model:{value:t.addGoodsForm.goods_price,callback:function(e){t.$set(t.addGoodsForm,"goods_price",e)},expression:"addGoodsForm.goods_price"}})],1),a("el-form-item",{attrs:{label:"商品重量",prop:"goods_weight",required:""}},[a("el-input-number",{staticClass:"num-left",attrs:{"controls-position":"right",min:1},model:{value:t.addGoodsForm.goods_weight,callback:function(e){t.$set(t.addGoodsForm,"goods_weight",e)},expression:"addGoodsForm.goods_weight"}})],1),a("el-form-item",{attrs:{label:"商品数量",prop:"goods_number",required:""}},[a("el-input-number",{staticClass:"num-left",attrs:{"controls-position":"right",min:1},model:{value:t.addGoodsForm.goods_number,callback:function(e){t.$set(t.addGoodsForm,"goods_number",e)},expression:"addGoodsForm.goods_number"}})],1),a("el-form-item",{attrs:{label:"商品分类",prop:"goods_cat"}},[a("el-cascader",{attrs:{options:t.goodsCateData,props:t.cascaderProps},model:{value:t.addGoodsForm.goods_cat,callback:function(e){t.$set(t.addGoodsForm,"goods_cat",e)},expression:"addGoodsForm.goods_cat"}})],1)],1),a("el-tab-pane",{attrs:{label:"商品参数",name:"1"}},t._l(this.manyTableData,(function(e){return a("el-form-item",{key:e.attr_id,attrs:{label:e.attr_name}},[a("el-checkbox-group",{model:{value:e.attr_vals,callback:function(a){t.$set(e,"attr_vals",a)},expression:"item1.attr_vals"}},t._l(e.attr_vals,(function(t,e){return a("el-checkbox",{key:e,attrs:{label:t,border:""}})})),1)],1)})),1),a("el-tab-pane",{attrs:{label:"商品属性",name:"2"}},t._l(this.onlyTableData,(function(e){return a("el-form-item",{key:e.attr_id,attrs:{label:e.attr_name}},[a("el-input",{model:{value:e.attr_vals,callback:function(a){t.$set(e,"attr_vals",a)},expression:"item.attr_vals"}})],1)})),1),a("el-tab-pane",{attrs:{label:"商品图片",name:"3"}},[a("el-upload",{attrs:{action:t.uploadURL,"list-type":"picture-card","on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove,"on-success":t.handleSuccess,headers:t.headerObj}},[a("i",{staticClass:"el-icon-plus"})])],1),a("el-tab-pane",{attrs:{label:"商品内容",name:"4"}},[a("quill-editor",{model:{value:t.addGoodsForm.goods_introduce,callback:function(e){t.$set(t.addGoodsForm,"goods_introduce",e)},expression:"addGoodsForm.goods_introduce"}}),a("el-button",{staticClass:"btn-mt",attrs:{type:"primary"},on:{click:t.addGoods}},[t._v("添加商品")])],1)],1)],1)],1),a("el-dialog",{attrs:{visible:t.showImgVisible},on:{"update:visible":function(e){t.showImgVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)},n=[];a("c740"),a("4160"),a("a15b"),a("a434"),a("ac1f"),a("1276"),a("159b"),a("a4d3"),a("e01a"),a("d28b"),a("e260"),a("d3b7"),a("3ca3"),a("ddb0");function s(t){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}a("96cf");var i=a("1da1"),o=a("4328"),c=a.n(o),l=a("60bb"),u=a.n(l),d={data:function(){return{activeIndex:"0",tabPosition:"left",addGoodsForm:{goods_name:"",goods_cat:[],goods_price:0,goods_number:0,goods_weight:0,goods_introduce:"",pics:[],attrs:[]},addGoodsFormRules:{goods_name:[{required:!0,message:"商品名称不能为空",trriger:"blur"}],goods_price:[{required:!0,type:"number",message:"商品价格不能为空",trriger:"blur"}],goods_weight:[{required:!0,type:"number",message:"商品重量不能为空",trriger:"blur"}],goods_number:[{required:!0,type:"number",message:"商品数量不能为空",trriger:"blur"}],goods_cat:[{required:!0,type:"array",message:"商品分类不能为空",trriger:"blur"}]},goodsCateData:[],cascaderProps:{expandTrigger:"hover",value:"cat_id",label:"cat_name",children:"children"},manyTableData:[],onlyTableData:[],uploadURL:"http://127.0.0.1:8888/api/private/v1/upload",headerObj:{Authorization:sessionStorage.getItem("token")},showImgVisible:!1,dialogImageUrl:""}},created:function(){this.getCategoriesList()},methods:{getCategoriesList:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/categories");case 2:if(a=e.sent,r=a.data,200===r.meta.status){e.next=6;break}return e.abrupt("return",t.$message.error("获取商品分类列表失败！"));case 6:t.goodsCateData=r.data;case 7:case"end":return e.stop()}}),e)})))()},beforeLeaveEvent:function(t,e){var a;return this.$refs.addGoodsFormRef.validate((function(t){t||(a=!1)})),a},handleClick:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,r,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("1"!==t.activeIndex){e.next=9;break}return e.next=3,t.$http.get("/categories/".concat(t.CateID,"/attributes"),{params:{sel:"many"}});case 3:if(a=e.sent,r=a.data,200===r.meta.status){e.next=7;break}return e.abrupt("return",t.$message.error("获取商品参数失败！"));case 7:r.data.forEach((function(t){""!==t.attr_vals&&(t.attr_vals=t.attr_vals.split(" "))})),t.manyTableData=r.data;case 9:if("2"!==t.activeIndex){e.next=17;break}return e.next=12,t.$http.get("/categories/".concat(t.CateID,"/attributes"),{params:{sel:"only"}});case 12:if(n=e.sent,s=n.data,200===s.meta.status){e.next=16;break}return e.abrupt("return",t.$message.error("获取商品属性失败！"));case 16:t.onlyTableData=s.data;case 17:case"end":return e.stop()}}),e)})))()},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.showImgVisible=!0},handleRemove:function(t){var e=t.response.data.tmp_path,a=this.addGoodsForm.pics.findIndex((function(t){return t.pic===e}));this.addGoodsForm.pics.splice(a,1)},handleSuccess:function(t){var e={pic:t.data.tmp_path};this.addGoodsForm.pics.push(e)},addGoods:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=u.a.cloneDeep(t.addGoodsForm),a.goods_cat=a.goods_cat.join(","),t.manyTableData.forEach((function(e){"object"===s(e.attr_vals)&&(e.attr_vals=e.attr_vals.join(" "));var a={attr_id:e.attr_id,attr_value:e.attr_vals};t.addGoodsForm.attrs.push(a)})),t.onlyTableData.forEach((function(e){"object"===s(e.attr_vals)&&(e.attr_vals=e.attr_vals.join(" "));var a={attr_id:e.attr_id,attr_value:e.attr_vals};t.addGoodsForm.attrs.push(a)})),a.attrs=t.addGoodsForm.attrs,e.next=7,t.$http.post("/goods",c.a.stringify(a),{header:{"Content-Type":"application/x-www-form-urlencoded"}});case 7:if(r=e.sent,n=r.data,201===n.meta.status){e.next=11;break}return e.abrupt("return",t.$message.error("添加商品失败！"));case 11:t.$message.success("添加商品成功！"),t.$router.push("/goods");case 13:case"end":return e.stop()}}),e)})))()}},computed:{CateID:function(){return this.addGoodsForm.goods_cat[this.addGoodsForm.goods_cat.length-1]}}},f=d,m=(a("ea1e"),a("2877")),p=Object(m["a"])(f,r,n,!1,null,"732e6190",null);e["default"]=p.exports},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var r=a("1d80"),n=a("5899"),s="["+n+"]",i=RegExp("^"+s+s+"*"),o=RegExp(s+s+"*$"),c=function(t){return function(e){var a=String(r(e));return 1&t&&(a=a.replace(i,"")),2&t&&(a=a.replace(o,"")),a}};t.exports={start:c(1),end:c(2),trim:c(3)}},6547:function(t,e,a){var r=a("a691"),n=a("1d80"),s=function(t){return function(e,a){var s,i,o=String(n(e)),c=r(a),l=o.length;return c<0||c>=l?t?"":void 0:(s=o.charCodeAt(c),s<55296||s>56319||c+1===l||(i=o.charCodeAt(c+1))<56320||i>57343?t?o.charAt(c):s:t?o.slice(c,c+2):i-56320+(s-55296<<10)+65536)}};t.exports={codeAt:s(!1),charAt:s(!0)}},"746f":function(t,e,a){var r=a("428f"),n=a("5135"),s=a("e538"),i=a("9bf2").f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});n(e,t)||i(e,t,{value:s.f(t)})}},"877c":function(t,e,a){"use strict";var r=a("a0ca"),n=a.n(r);n.a},"892b":function(t,e,a){},"8aa5":function(t,e,a){"use strict";var r=a("6547").charAt;t.exports=function(t,e,a){return e+(a?r(t,e).length:1)}},9263:function(t,e,a){"use strict";var r=a("ad6d"),n=a("9f7f"),s=RegExp.prototype.exec,i=String.prototype.replace,o=s,c=function(){var t=/a/,e=/b*/g;return s.call(t,"a"),s.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),l=n.UNSUPPORTED_Y||n.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],d=c||u||l;d&&(o=function(t){var e,a,n,o,d=this,f=l&&d.sticky,m=r.call(d),p=d.source,g=0,b=t;return f&&(m=m.replace("y",""),-1===m.indexOf("g")&&(m+="g"),b=String(t).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==t[d.lastIndex-1])&&(p="(?: "+p+")",b=" "+b,g++),a=new RegExp("^(?:"+p+")",m)),u&&(a=new RegExp("^"+p+"$(?!\\s)",m)),c&&(e=d.lastIndex),n=s.call(f?a:d,b),f?n?(n.input=n.input.slice(g),n[0]=n[0].slice(g),n.index=d.lastIndex,d.lastIndex+=n[0].length):d.lastIndex=0:c&&n&&(d.lastIndex=d.global?n.index+n[0].length:e),u&&n&&n.length>1&&i.call(n[0],a,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(n[o]=void 0)})),n}),t.exports=o},"976a":function(t,e,a){},"9f7f":function(t,e,a){"use strict";var r=a("d039");function n(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=r((function(){var t=n("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=r((function(){var t=n("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},a0ca:function(t,e,a){},a15b:function(t,e,a){"use strict";var r=a("23e7"),n=a("44ad"),s=a("fc6a"),i=a("a640"),o=[].join,c=n!=Object,l=i("join",",");r({target:"Array",proto:!0,forced:c||!l},{join:function(t){return o.call(s(this),void 0===t?",":t)}})},a434:function(t,e,a){"use strict";var r=a("23e7"),n=a("23cb"),s=a("a691"),i=a("50c4"),o=a("7b0b"),c=a("65f0"),l=a("8418"),u=a("1dde"),d=a("ae40"),f=u("splice"),m=d("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,g=Math.min,b=9007199254740991,h="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!f||!m},{splice:function(t,e){var a,r,u,d,f,m,v=o(this),_=i(v.length),y=n(t,_),x=arguments.length;if(0===x?a=r=0:1===x?(a=0,r=_-y):(a=x-2,r=g(p(s(e),0),_-y)),_+a-r>b)throw TypeError(h);for(u=c(v,r),d=0;d<r;d++)f=y+d,f in v&&l(u,d,v[f]);if(u.length=r,a<r){for(d=y;d<_-r;d++)f=d+r,m=d+a,f in v?v[m]=v[f]:delete v[m];for(d=_;d>_-r+a;d--)delete v[d-1]}else if(a>r)for(d=_-r;d>y;d--)f=d+r-1,m=d+a-1,f in v?v[m]=v[f]:delete v[m];for(d=0;d<a;d++)v[d+y]=arguments[d+2];return v.length=_-r+a,u}})},a4d3:function(t,e,a){"use strict";var r=a("23e7"),n=a("da84"),s=a("d066"),i=a("c430"),o=a("83ab"),c=a("4930"),l=a("fdbf"),u=a("d039"),d=a("5135"),f=a("e8b5"),m=a("861d"),p=a("825a"),g=a("7b0b"),b=a("fc6a"),h=a("c04e"),v=a("5c6c"),_=a("7c73"),y=a("df75"),x=a("241c"),w=a("057f"),C=a("7418"),k=a("06cf"),P=a("9bf2"),F=a("d1e7"),S=a("9112"),R=a("6eeb"),$=a("5692"),E=a("f772"),T=a("d012"),L=a("90e3"),O=a("b622"),I=a("e538"),V=a("746f"),G=a("d44e"),j=a("69f3"),D=a("b727").forEach,q=E("hidden"),A="Symbol",z="prototype",N=O("toPrimitive"),B=j.set,M=j.getterFor(A),U=Object[z],K=n.Symbol,H=s("JSON","stringify"),J=k.f,Y=P.f,Q=w.f,W=F.f,X=$("symbols"),Z=$("op-symbols"),tt=$("string-to-symbol-registry"),et=$("symbol-to-string-registry"),at=$("wks"),rt=n.QObject,nt=!rt||!rt[z]||!rt[z].findChild,st=o&&u((function(){return 7!=_(Y({},"a",{get:function(){return Y(this,"a",{value:7}).a}})).a}))?function(t,e,a){var r=J(U,e);r&&delete U[e],Y(t,e,a),r&&t!==U&&Y(U,e,r)}:Y,it=function(t,e){var a=X[t]=_(K[z]);return B(a,{type:A,tag:t,description:e}),o||(a.description=e),a},ot=l?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof K},ct=function(t,e,a){t===U&&ct(Z,e,a),p(t);var r=h(e,!0);return p(a),d(X,r)?(a.enumerable?(d(t,q)&&t[q][r]&&(t[q][r]=!1),a=_(a,{enumerable:v(0,!1)})):(d(t,q)||Y(t,q,v(1,{})),t[q][r]=!0),st(t,r,a)):Y(t,r,a)},lt=function(t,e){p(t);var a=b(e),r=y(a).concat(pt(a));return D(r,(function(e){o&&!dt.call(a,e)||ct(t,e,a[e])})),t},ut=function(t,e){return void 0===e?_(t):lt(_(t),e)},dt=function(t){var e=h(t,!0),a=W.call(this,e);return!(this===U&&d(X,e)&&!d(Z,e))&&(!(a||!d(this,e)||!d(X,e)||d(this,q)&&this[q][e])||a)},ft=function(t,e){var a=b(t),r=h(e,!0);if(a!==U||!d(X,r)||d(Z,r)){var n=J(a,r);return!n||!d(X,r)||d(a,q)&&a[q][r]||(n.enumerable=!0),n}},mt=function(t){var e=Q(b(t)),a=[];return D(e,(function(t){d(X,t)||d(T,t)||a.push(t)})),a},pt=function(t){var e=t===U,a=Q(e?Z:b(t)),r=[];return D(a,(function(t){!d(X,t)||e&&!d(U,t)||r.push(X[t])})),r};if(c||(K=function(){if(this instanceof K)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=L(t),a=function(t){this===U&&a.call(Z,t),d(this,q)&&d(this[q],e)&&(this[q][e]=!1),st(this,e,v(1,t))};return o&&nt&&st(U,e,{configurable:!0,set:a}),it(e,t)},R(K[z],"toString",(function(){return M(this).tag})),R(K,"withoutSetter",(function(t){return it(L(t),t)})),F.f=dt,P.f=ct,k.f=ft,x.f=w.f=mt,C.f=pt,I.f=function(t){return it(O(t),t)},o&&(Y(K[z],"description",{configurable:!0,get:function(){return M(this).description}}),i||R(U,"propertyIsEnumerable",dt,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:K}),D(y(at),(function(t){V(t)})),r({target:A,stat:!0,forced:!c},{for:function(t){var e=String(t);if(d(tt,e))return tt[e];var a=K(e);return tt[e]=a,et[a]=e,a},keyFor:function(t){if(!ot(t))throw TypeError(t+" is not a symbol");if(d(et,t))return et[t]},useSetter:function(){nt=!0},useSimple:function(){nt=!1}}),r({target:"Object",stat:!0,forced:!c,sham:!o},{create:ut,defineProperty:ct,defineProperties:lt,getOwnPropertyDescriptor:ft}),r({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:mt,getOwnPropertySymbols:pt}),r({target:"Object",stat:!0,forced:u((function(){C.f(1)}))},{getOwnPropertySymbols:function(t){return C.f(g(t))}}),H){var gt=!c||u((function(){var t=K();return"[null]"!=H([t])||"{}"!=H({a:t})||"{}"!=H(Object(t))}));r({target:"JSON",stat:!0,forced:gt},{stringify:function(t,e,a){var r,n=[t],s=1;while(arguments.length>s)n.push(arguments[s++]);if(r=e,(m(e)||void 0!==t)&&!ot(t))return f(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!ot(e))return e}),n[1]=e,H.apply(null,n)}})}K[z][N]||S(K[z],N,K[z].valueOf),G(K,A),T[q]=!0},a640:function(t,e,a){"use strict";var r=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&r((function(){a.call(null,e||function(){throw 1},1)}))}},a687:function(t,e,a){},ac1f:function(t,e,a){"use strict";var r=a("23e7"),n=a("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==n},{exec:n})},ad6d:function(t,e,a){"use strict";var r=a("825a");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},c740:function(t,e,a){"use strict";var r=a("23e7"),n=a("b727").findIndex,s=a("44d2"),i=a("ae40"),o="findIndex",c=!0,l=i(o);o in[]&&Array(1)[o]((function(){c=!1})),r({target:"Array",proto:!0,forced:c||!l},{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),s(o)},c8d2:function(t,e,a){var r=a("d039"),n=a("5899"),s="​᠎";t.exports=function(t){return r((function(){return!!n[t]()||s[t]()!=s||n[t].name!==t}))}},c975:function(t,e,a){"use strict";var r=a("23e7"),n=a("4d64").indexOf,s=a("a640"),i=a("ae40"),o=[].indexOf,c=!!o&&1/[1].indexOf(1,-0)<0,l=s("indexOf"),u=i("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:c||!l||!u},{indexOf:function(t){return c?o.apply(this,arguments)||0:n(this,t,arguments.length>1?arguments[1]:void 0)}})},d28b:function(t,e,a){var r=a("746f");r("iterator")},d3e9:function(t,e,a){"use strict";var r=a("976a"),n=a.n(r);n.a},d784:function(t,e,a){"use strict";a("ac1f");var r=a("6eeb"),n=a("d039"),s=a("b622"),i=a("9263"),o=a("9112"),c=s("species"),l=!n((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),d=s("replace"),f=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),m=!n((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var a="ab".split(t);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}));t.exports=function(t,e,a,d){var p=s(t),g=!n((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),b=g&&!n((function(){var e=!1,a=/a/;return"split"===t&&(a={},a.constructor={},a.constructor[c]=function(){return a},a.flags="",a[p]=/./[p]),a.exec=function(){return e=!0,null},a[p](""),!e}));if(!g||!b||"replace"===t&&(!l||!u||f)||"split"===t&&!m){var h=/./[p],v=a(p,""[t],(function(t,e,a,r,n){return e.exec===i?g&&!n?{done:!0,value:h.call(e,a,r)}:{done:!0,value:t.call(a,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),_=v[0],y=v[1];r(String.prototype,t,_),r(RegExp.prototype,p,2==e?function(t,e){return y.call(t,this,e)}:function(t){return y.call(t,this)})}d&&o(RegExp.prototype[p],"sham",!0)}},ddb0:function(t,e,a){var r=a("da84"),n=a("fdbc"),s=a("e260"),i=a("9112"),o=a("b622"),c=o("iterator"),l=o("toStringTag"),u=s.values;for(var d in n){var f=r[d],m=f&&f.prototype;if(m){if(m[c]!==u)try{i(m,c,u)}catch(g){m[c]=u}if(m[l]||i(m,l,d),n[d])for(var p in s)if(m[p]!==s[p])try{i(m,p,s[p])}catch(g){m[p]=s[p]}}}},e01a:function(t,e,a){"use strict";var r=a("23e7"),n=a("83ab"),s=a("da84"),i=a("5135"),o=a("861d"),c=a("9bf2").f,l=a("e893"),u=s.Symbol;if(n&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new u(t):void 0===t?u():u(t);return""===t&&(d[e]=!0),e};l(f,u);var m=f.prototype=u.prototype;m.constructor=f;var p=m.toString,g="Symbol(test)"==String(u("test")),b=/^Symbol\((.*)\)[^)]+$/;c(m,"description",{configurable:!0,get:function(){var t=o(this)?this.valueOf():this,e=p.call(t);if(i(d,t))return"";var a=g?e.slice(7,-1):e.replace(b,"$1");return""===a?void 0:a}}),r({global:!0,forced:!0},{Symbol:f})}},e538:function(t,e,a){var r=a("b622");e.f=r},ea1e:function(t,e,a){"use strict";var r=a("a687"),n=a.n(r);n.a},fb9f:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("商品管理")]),a("el-breadcrumb-item",[t._v("商品分类")])],1),a("el-card",{staticClass:"box-card"},[a("el-button",{staticClass:"mg-b",attrs:{type:"primary"},on:{click:t.addCategories}},[t._v("添加分类")]),a("el-table",{staticStyle:{},attrs:{data:t.categoriesList,border:"",stripe:"","row-key":"cat_id","tree-props":{children:"children"}}},[a("el-table-column",{attrs:{type:"index",label:"#",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.cat_level?a("i",{staticClass:"el-icon-s-help"}):t._e()]}}])}),a("el-table-column",{attrs:{label:"分类名称",prop:"cat_name"}}),a("el-table-column",{attrs:{label:"是否有效"},scopedSlots:t._u([{key:"default",fn:function(t){return[!1===t.row.cat_deleted?a("i",{staticClass:"el-icon-success",staticStyle:{color:"lightgreen"}}):a("i",{staticClass:"el-icon-error",staticStyle:{color:"red"}})]}}])}),a("el-table-column",{attrs:{label:"排序",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.cat_level?a("el-tag",{attrs:{type:"primary"}},[t._v("一级")]):t._e(),1==e.row.cat_level?a("el-tag",{attrs:{type:"success"}},[t._v("二级")]):t._e(),2==e.row.cat_level?a("el-tag",{attrs:{type:"warning"}},[t._v("三级")]):t._e()]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(a){return t.editCategories(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return t.deleteCategories(e.row)}}},[t._v("删除")])]}}])})],1),a("el-pagination",{attrs:{"current-page":t.reqParams.pagenum,"page-sizes":[5,10,20],"page-size":t.reqParams.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.sizeChange,"current-change":t.currentChange}}),a("div",[a("el-dialog",{attrs:{title:"添加分类",visible:t.addCateVisible,width:"50%"},on:{"update:visible":function(e){t.addCateVisible=e},close:t.resetAddCate}},[a("el-form",{ref:"addCateFormRef",attrs:{model:t.addCateForm,rules:t.addCateFormRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"分类名称",prop:"cat_name"}},[a("el-input",{model:{value:t.addCateForm.cat_name,callback:function(e){t.$set(t.addCateForm,"cat_name",e)},expression:"addCateForm.cat_name"}})],1),a("el-form-item",{attrs:{label:"父级分类",prop:"cat_level"}},[a("el-cascader",{attrs:{props:t.cateProps,options:t.parentCateList,clearable:"",filterable:""},on:{change:t.handleChange},model:{value:t.selectdKeys,callback:function(e){t.selectdKeys=e},expression:"selectdKeys"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addCateVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addParentCate}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑分类",visible:t.editCateVisible,width:"50%"},on:{"update:visible":function(e){t.editCateVisible=e},close:t.resetEditVisible}},[a("el-form",{ref:"editCateFormRef",attrs:{model:t.editCateForm,rules:t.editCateFormRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"分类名称",prop:"cat_name"}},[a("el-input",{model:{value:t.editCateForm.cat_name,callback:function(e){t.$set(t.editCateForm,"cat_name",e)},expression:"editCateForm.cat_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editCateVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.editCate}},[t._v("确 定")])],1)],1)],1)],1)],1)},n=[],s=(a("96cf"),a("1da1")),i=a("4328"),o=a.n(i),c={data:function(){return{categoriesList:[],reqParams:{type:3,pagenum:1,pagesize:5},total:0,addCateVisible:!1,addCateForm:{cat_pid:0,cat_name:"",cat_level:0},addCateFormRules:{cat_name:[{required:!0,message:"分类名称不能为空",trriger:"blur"},{max:20,message:"分类名称最大20个字符",trriger:"blur"}]},parentCateList:[],cateProps:{expandTrigger:"hover",checkStrictly:!0,value:"cat_id",label:"cat_name",children:"children"},selectdKeys:[],editCateVisible:!1,editCateForm:{},editCateFormRules:{cat_name:[{required:!0,message:"分类名称不能为空",trriger:"blur"},{max:20,message:"分类名称最大20个字符",trriger:"blur"}]}}},created:function(){this.getCategoriesList()},methods:{getCategoriesList:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/categories",{params:t.reqParams});case 2:if(a=e.sent,r=a.data,200===r.meta.status){e.next=6;break}return e.abrupt("return",t.$message.error("获取商品分类列表失败！"));case 6:t.categoriesList=r.data.result,t.total=r.data.total;case 8:case"end":return e.stop()}}),e)})))()},sizeChange:function(t){this.reqParams.pagesize=t,this.reqParams.pagenum=1,this.getCategoriesList()},currentChange:function(t){this.reqParams.pagenum=t,this.getCategoriesList()},addCategories:function(){this.cascaderCateList(),this.addCateVisible=!0},resetAddCate:function(){this.$refs.addCateFormRef.resetFields(),this.selectdKeys=[],this.addCateForm.cat_level=0,this.addCateForm.cat_pid=0},cascaderCateList:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("categories",{params:{type:2}});case 2:if(a=e.sent,r=a.data,200===r.meta.status){e.next=8;break}return e.abrupt("return",t.$message.error("获取商品分类数据列表失败！"));case 8:t.parentCateList=r.data;case 9:case"end":return e.stop()}}),e)})))()},handleChange:function(){this.selectdKeys.length>0?(this.addCateForm.cat_pid=this.selectdKeys[this.selectdKeys.length-1],this.addCateForm.cat_level=this.selectdKeys.length):(this.addCateForm.cat_pid=0,this.addCateForm.cat_level=0)},addParentCate:function(){var t=this;this.$refs.addCateFormRef.validate(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(a){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$http.post("/categories",o.a.stringify(t.addCateForm),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 4:if(r=e.sent,n=r.data,201===n.meta.status){e.next=10;break}return e.abrupt("return",t.$message.error("添加分类失败！"));case 10:t.$message.success("添加分类成功！"),t.getCategoriesList(),t.addCateForm.cat_name="",t.addCateVisible=!1;case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},editCategories:function(t){this.editCateForm=t,this.editCateVisible=!0},resetEditVisible:function(){this.$refs.editCateFormRef.resetFields(),this.getCategoriesList()},editCate:function(){var t=this;this.$refs.editCateFormRef.validate(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(a){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$http.put("/categories/".concat(t.editCateForm.cat_id),o.a.stringify({cat_name:t.editCateForm.cat_name}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 4:if(r=e.sent,n=r.data,200===n.meta.status){e.next=10;break}return e.abrupt("return",t.$message.error("修改分类名称失败！"));case 10:t.$message.success("修改分类名称成功！"),t.getCategoriesList(),t.editCateVisible=!1,t.$refs.editCateFormRef.resetFields();case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},deleteCategories:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$confirm("此操作将永久删除该分类, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(t){return t}));case 2:if(r=a.sent,"confirm"!==r){a.next=14;break}return a.next=6,e.$http.delete("/categories/".concat(t.cat_id));case 6:if(n=a.sent,s=n.data,200===s.meta.status){a.next=12;break}return a.abrupt("return",e.$message.error("删除分类失败！"));case 12:e.$message.success("删除分类成功！"),e.getCategoriesList();case 14:case"end":return a.stop()}}),a)})))()}}},l=c,u=(a("4f88"),a("2877")),d=Object(u["a"])(l,r,n,!1,null,"7ba6d8e0",null);e["default"]=d.exports},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=goods_categories_params_add.efadf2f3.js.map